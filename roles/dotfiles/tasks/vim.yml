---
- block:
    # required for Vim YouCompleteMe plugin to work on MacOS
    - name: vim | Install brew cmake/macvim
      homebrew:
        name: "['cmake', 'macvim']"
        state: "present"
      when: install_packages | d() | bool
      tags: brew

    - name: vim | Deploy {{ home_dir }}/.{{ item }}
      copy:
        src: "{{ item }}"
        dest: "{{ home_dir }}/.{{ item }}"
        mode: 0644
        owner: "{{ user }}"
        group: "{{ group }}"
      loop:
        - "vimrc"
        - "vimrc.plug"

    - name: vim | Clone zsh-completions plugin repo
      git:
        repo: https://github.com/ctrlpvim/ctrlp.vim
        dest: "{{ home_dir }}/.vim/bundle/ctrlp.vim"
        force: yes

    - name: vim | Install powerline-status
      pip:
        name: powerline-status
      when: install_packages

  tags: vim
